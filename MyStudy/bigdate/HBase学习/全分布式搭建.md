# 1. 环境准备

## 1.1 节点分配

```
		NN	DN	ZK	Master	backup-Master	ReginServer
node05  1			 1					
node06	1	1	1							1
node07		1	1							1
node09		1	1							1
node10						1
```

## 1.2 环境配置

**在node05上配置**

- 1、配置Hbase的环境变量

- 2、配置Hbase 分布式的配置文件: $HBASE_HOME/conf/

  - hbase-env.sh
    - 修改 JAVA_HOME
    - 修改HBASE_MANAGES_ZK=false  (不使用Hbase自带的Zookeeper)
  - hbase-site.xml

  ```xml
    <property>
      <name>hbase.rootdir</name>
      <value>hdfs://node05:8020/hbase</value>
    </property>
    <property>
      <name>hbase.cluster.distributed</name>
      <value>true</value>
    </property>
    <property>
      <name>hbase.zookeeper.quorum</name>
      <value>node06,node07,node09</value>
    </property>
  ```

  - regionservers文件添加 reginserver 的节点：

  ```
  node06
  node07
  node09
  ```

  - backup-masters 文件添加master的备机

  ```
  node10
  ```

  - 将hadoop的hdfs-site.xml添加进当前目录（$HBASE_HOME/conf/）

  ```vb
  cp ../../hadoop-2.6.5/etc/hadoop/hdfs-site.xml ./
  ```

- 3、将 上面的配置文件分发给 node06 、node07、node09、node10

```vb
[root@node05 conf]# scp ./* node10:`pwd`
```

- 4、启动Hbase集群

```vb
# start-hbase.sh
```

## 1.3 hbase的一些命令

```vb
停止regionserver
/bin/hbase-daemon.sh stop regionserver RegionServer
 
启动regionserver
/bin/hbase-daemon.sh start regionserver RegionServer
 
重启regionserver
bin/graceful_stop.sh --restart --reload --debug nodename
```

